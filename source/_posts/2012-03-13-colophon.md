---
layout: post
title: Colophon
tags: Matt Chadburn
permalink: /post/19230899764/colophon
---
Here's the technical stack we've used to build responsive news.

Nb. BBC is a large(ish) organisation so we've already got a fully operational
platform upon which to write applications, so I've not listed every last
thing, just the tools and technology that we've selected to create our
project.

<!-- more -->

## Javascript

We use [bonzo](https://github.com/ded/bonzo) +
[qwery](https://github.com/ded/qwery) for dom manipulation and
[reqwest](https://github.com/runningskull/reqwest) for xhr (we use
runningskull's fork with jsonp and error callback support),
[curl.js](https://github.com/cujojs/curl) is our AMD loader and
[EventEmitter](https://github.com/Wolfy87/EventEmitter) manages all the
pub/sub events between interface components. Mostly these were chosen because
they were very lightweight, hence suitable for low bandwidth services, and
more geared towards a [modern definition of _browser
support_](http://blog.responsivenews.co.uk/blog/2012/03/08/cutting-the-
mustard/) than tools like jQuery, YUI etc. The total javascript footprint,
once concatenated with [require.js](http://requirejs.org/) for the project to
date is around ~14kb + ~4.5kb (curl.js), which we are quite pleased with.

To help us test we use [QUnit](http://docs.jquery.com/QUnit),
[Sinon.JS](http://sinonjs.org/), and [jshint](http://www.jshint.com/) to lint
the code.

We wrote and contributed to the community
[Spassky](https://github.com/BBC/spassky), a simple test runner for our
javascript.

## CSS

We've used [less](http://lesscss.org/) to produce all of the CSS. Mark writes
about [how they are structured on our
blog](http://blog.responsivenews.co.uk/blog/2011/11/08/responsive-css-that-
scales/).

Our icon set (cf. [css3 type](http://www.w3.org/TR/css3-fonts/)) is generated
via [fontsquirrel.com](http://www.fontsquirrel.com).

The principal design work was done in
[Illustrator](http://www.adobe.com/products/illustrator.html), whose vector
format works nicely for previewing at different sizes on different devices.

## PHP

The bulk of the page generation happens through the magic of PHP 5.3.2 on
Apache with [Varnish](https://www.varnish-cache.org/) sat in front of
everything.

For our [prototype](http://www.responsivenews.co.uk) we used
[Silex](http://silex.sensiolabs.org/), [Twig](http://twig.sensiolabs.org/) and
[Goutte](https://github.com/fabpot/Goutte), which had to make way for [Zend
Framework 1.x](http://framework.zend.com/) when it came to the _production_
application development, inline with BBC standards.

We use [Pimple](http://pimple.sensiolabs.org/) for DI.

## Testing

[XHProf](https://github.com/facebook/xhprof), [Siege](http://www.joedog.org
/siege-home/) and [Tsung](http://tsung.erlang-projects.org/) have all be
useful to performance test the application.

All our features are documented in [Gherkin
DSL](https://github.com/cucumber/cucumber/wiki/Gherkin) and we use
[Cucumber](http://cukes.info/) to execute these features as a test suite every
commit to master. As an aside, we found this tool did not make it easy for the
team to visualize and search through the feature files so we wrote
[Wally](https://github.com/bbc/wally) to help with that. For smaller projects
with less custom requirements, [Relish](https://www.relishapp.com) might
suffice.

We use [REST-assured](https://github.com/BBC/REST-assured), another BBC open
source project, to mock our API service calls.

## API

The journalism (the words, pictures, the editorialised indexes etc.) that
makes up the majority of the site is sourced (by PHP, see above) from a set of
internal APIs, the primary one being the 'Content API'.

To store the news stories and indexes we use a [Mark Logic XML Content
Store](http://www.marklogic.com/) and XQuery for document retrieval. This is
abstracted via a Java/Spring/CXF JSR 311 compliant REST service. The REST API
is accessible via HTTPS with an appropriate certificate. The API is designed
as a generic fa√ßade onto the Content Store allowing XML data to transformed
into JSON using [Jackson](http://jackson.codehaus.org/) and re-used in other
BBC products. This service orchestrates XQueries and ensures that results are
dynamically cached with a low 'time-to-live' (TTL) expiry cross data centers
using [Memcached](http://memcached.org/).

## More

There's dozens of other critical code, systems, tools that teams across the
BBC provide to make our lives easier, far too many to list here and it would
be far too unfair to single any particular team out. Occasionally they will
pop up on the [BBC Internet blog](http://www.bbc.co.uk/blogs/bbcinternet/) to
showcase their wares.

